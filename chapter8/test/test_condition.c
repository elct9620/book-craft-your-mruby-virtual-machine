#include "test_condition.h"

void test_opcode_eq() {
  const uint8_t bin[] = {
    /**
     * # Ruby Code
     * 1 == 1
     */
    0x52,0x49,0x54,0x45,0x30,0x30,0x30,0x37,0x81,0x52,0x00,0x00,0x00,0x49,0x4d,0x41,
    0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0x2b,0x30,0x30,
    0x30,0x32,0x00,0x00,0x00,0x3e,0x00,0x01,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x09,
    0x07,0x01,0x07,0x02,0x41,0x01,0x37,0x01,0x67,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x45,0x4e,0x44,0x00,0x00,0x00,0x00,0x08,
  };

  int ret = mrb_exec(bin + 34);

  TEST_ASSERT_EQUAL_UINT32(1, ret);
}

void test_opcode_lt() {
  const uint8_t bin[] = {
    /**
     * # Ruby Code
     * 10 < 1
     */
    0x52,0x49,0x54,0x45,0x30,0x30,0x30,0x37,0xbd,0xee,0x00,0x00,0x00,0x4a,0x4d,0x41,
    0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0x2c,0x30,0x30,
    0x30,0x32,0x00,0x00,0x00,0x42,0x00,0x01,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x0a,
    0x03,0x01,0x0a,0x07,0x02,0x42,0x01,0x37,0x01,0x67,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x45,0x4e,0x44,0x00,0x00,0x00,0x00,0x08,
  };

  int ret = mrb_exec(bin + 34);

  TEST_ASSERT_EQUAL_UINT32(0, ret);
}
void test_opcode_le() {
  const uint8_t bin[] = {
    /**
     * # Ruby Code
     * 1 <= 10
     */
    0x52,0x49,0x54,0x45,0x30,0x30,0x30,0x37,0x83,0x72,0x00,0x00,0x00,0x4a,0x4d,0x41,
    0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0x2c,0x30,0x30,
    0x30,0x32,0x00,0x00,0x00,0x42,0x00,0x01,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x0a,
    0x07,0x01,0x03,0x02,0x0a,0x43,0x01,0x37,0x01,0x67,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x45,0x4e,0x44,0x00,0x00,0x00,0x00,0x08,
  };

  int ret = mrb_exec(bin + 34);

  TEST_ASSERT_EQUAL_UINT32(1, ret);
}
void test_opcode_gt() {
  const uint8_t bin[] = {
    /**
     * # Ruby Code
     * 10 > 9
     */
    0x52,0x49,0x54,0x45,0x30,0x30,0x30,0x37,0xcc,0x20,0x00,0x00,0x00,0x4b,0x4d,0x41,
    0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0x2d,0x30,0x30,
    0x30,0x32,0x00,0x00,0x00,0x46,0x00,0x01,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x0b,
    0x03,0x01,0x0a,0x03,0x02,0x09,0x44,0x01,0x37,0x01,0x67,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x45,0x4e,0x44,0x00,0x00,0x00,0x00,0x08,
  };

  int ret = mrb_exec(bin + 34);

  TEST_ASSERT_EQUAL_UINT32(1, ret);
}
void test_opcode_ge() {
  const uint8_t bin[] = {
    /**
     * # Ruby Code
     * 1 >= 9
     */
    0x52,0x49,0x54,0x45,0x30,0x30,0x30,0x37,0x39,0xa7,0x00,0x00,0x00,0x4a,0x4d,0x41,
    0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0x2c,0x30,0x30,
    0x30,0x32,0x00,0x00,0x00,0x42,0x00,0x01,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x0a,
    0x07,0x01,0x03,0x02,0x09,0x45,0x01,0x37,0x01,0x67,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x45,0x4e,0x44,0x00,0x00,0x00,0x00,0x08,
  };

  int ret = mrb_exec(bin + 34);

  TEST_ASSERT_EQUAL_UINT32(0, ret);
}

